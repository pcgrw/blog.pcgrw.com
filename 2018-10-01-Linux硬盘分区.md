---

title: Linux硬盘分区

categories:

- Linux

tags:

- Linux

abbrlink: 977b4e63

date: 2018-10-01 13:43:19

---

# 硬盘分区 #

> 硬盘分区是使用分区编辑器（partition editor）在磁盘上划分几个逻辑部分，碟片一旦划分成数个分区（Partition），不同类的目录与文件可以存储进不同的分区。越多分区，也就有更多不同的地方，可以将文件的性质区分得更细，按照更为细分的性质，存储在不同的地方以管理文件；但太多分区就成了麻烦。空间管理、访问许可与目录搜索的方式，依属于安装在分区上的文件系统。当改变大小的能力依属于安装在分区上的文件系统时，需要谨慎地考虑分区的大小。磁盘分区可做看作是逻辑卷管理、软件RAID前身的一项简单技术。

<!-- more -->

## 目的 ##
分区允许在一个磁盘上有多个文件系统。有许多理由需要这么做：

- 有利于管理，系统一般单独放一个区，这样由于系统区只放系统，其他区不会受到系统盘出现磁盘碎片的性能影响。
- 碍于技术限制（例如旧版的微软FAT文件系统不能访问超过一定的磁盘空间；旧的PC BIOS不允许从超过硬盘1024个柱面的位置启动操作系统）
- 如果一个分区出现逻辑损坏，仅损坏的分区而不是整个硬盘受影响。
- 在一些操作系统（如Linux）交换文件通常自己就是一个分区。在这种情况下，双重启动配置的系统就可以让几个操作系统使用同一个交换分区以节省磁盘空间。
- 避免过大的日志或者其他文件占满导致整个计算机故障，将它们放在独立的分区，这样可能只有那一个分区出现空间耗尽。
- 两个操作系统经常不能存在同一个分区上或者使用不同的“本地”磁盘格式。为了不同的操作系统，将磁盘分成不同的逻辑磁盘。
- 许多文件系统使用固定大小的簇将文件写到磁盘上，这些簇的大小与所在分区文件系统大小直接成比例。如果一个文件大小不是簇大小的整数倍，文件簇组中的最后一个将会有不能被其它文件使用的空闲空间。这样，使用簇的文件系统使得文件在磁盘上所占空间超出它们在内存中所占空间，并且越大的分区意味着越大的簇大小和越大的浪费空间。所以，使用几个较小的分区而不是大分区可以节省空间。
- 每个分区可以根据不同的需求定制。例如，如果一个分区很少往里写数据，就可以将它加载为只读。如果想要许多小文件，就需要使用有许多节点的文件系统分区。
- 在运行Unix的多用户系统上，有可能需要防止用户的硬链接攻击。为了达到这个目的，/home和/tmp路径必须与如/var和/etc下的系统文件分开。

## 分区机制 ##

### 微软视窗 ###

微软视窗的标准分区机制是创建一个分区 C:，其中操作系统、数据和程序都在这个分区上。然而，它推荐创建不同的分区或者使用不同的硬盘，其中一个分区上存储操作系统；而其它分区或者驱动器，则供应用程序或者数据使用。[来源请求]如果可能的话，在不包含操作系统的硬盘上，为交换文件创建一个单独的分区，尽管这并不意味着两个硬盘都不会断电。在进行一点儿预分区工作之后，很容易就可实现操作系统不存储在 C 分区上甚至是 C 分区根本就不存在。这样做有一些益处，一些设计拙劣的病毒或者特洛伊木马将不能覆盖关键的系统文件或者控制系统。“我的文档”文件夹、“特殊文件夹”主目录可以加载到一个独立分区上以利用所有空闲空间。

### UNIX 系统 ###

对于基于UNIX或者如Linux这样类似于Unix的操作系统来说，分区系统创建了 /、/boot、/home、/tmp、/usr、/var、/opt和交换分区。这就保证了如果其中一个文件系统损坏，其它的数据（其它的文件系统）不受影响，这样就减少了数据丢失。这样做的一个缺点是将整个驱动器划分成固定大小的小分区，例如，一个用户可能会填满 /home 分区并且用完可用硬盘空间，即使其它分区上还有充足的空闲空间。良好的实现方法要求用户预测每个分区可能需要的空间；有时这是一项困难的工作。典型的桌面系统使用另外一种约定；“/”（根目录）分区包含整个文件系统和独立的交换分区。 /home 分区对于桌面应用来说是一个有用的分区，因为它允许在不破坏数据的前提下干净地重新安装（或者另外一个Linux发行版的更新安装）。

## 分区类型 ##

### 主分区 ###

主分区也称为主磁盘分区，和扩展分区、逻辑分区一样，是一种分区类型。主分区中不能再划分其他类型的分区，因此每个主分区都相当于一个逻辑磁盘（在这一点上主分区和逻辑分区很相似，但主分区是直接在硬盘上划分的，逻辑分区则必须建立于扩展分区中）。早期MBR模式分区只能划分四个分区，现在的GPT分区至少可以划分128个主分区，未来很有可能将不存在扩展分区和逻辑分区的概念。

一个硬盘的主分区包含操作系统启动所必需的文件和数据的硬盘分区，要在硬盘上安装操作系统，则硬盘必须有一个主分区。

### 扩展分区 ###

扩展分区不是一个实际意义的分区，它仅仅是一个指向下一个分区的指针，这种指针结构将形成一个单向链表。这样在主引导扇区中除了主分区外，仅需要存储一个被称为扩展分区的分区数据，通过这个扩展分区的数据可以找到下一个分区(实际上也就是下一个逻辑磁盘)的起始位置，以此起始位置类推可以找到所有的分区。无论系统中建立多少个逻辑磁盘，在主引导扇区中通过一个扩展分区的参数就可以逐个找到每一个逻辑磁盘。

### 逻辑分区 ###

逻辑分区是硬盘上一块连续的区域，不同之处在于，每个主分区只能分成一个驱动器，每个主分区都有各自独立的引导块，可以用fdisk设定为启动区。一个硬盘上最多可以有4个主分区，而扩展分区上可以划分出多个逻辑驱动器。这些逻辑驱动器没有独立的引导块，不能用fdisk设定为启动区。主分区和扩展分区都是dos分区。

### 分区之间容量关系 ###

硬盘的容量=主分区的容量+扩展分区的容量  
扩展分区的容量=各个逻辑分区的容量之和

## 格式化 ##

格式化(高级格式化)又称逻辑格式化，它是指根据用户选定的文件系统(如FAT16、FAT32、NTFS、EXT2、EXT3、EXT4等),在磁盘的特定区域写入特定数据，在分区中划分出一片用于存放文件分配表、目录表等用于文件管理的磁盘空间。

## 硬件设备文件名 ##

硬件 | 设备文件名
--- | ---
IDE硬盘 | /dev/hd[a-d]
SCSI/SATA/USB硬盘 | /dev/sd[a-p]
光驱 | /dev/cdrom或/dev/hdc
软盘 | /dev/fd[0-1]
打印机(25针) | /dev/lp[0-2]
打印机(USB) | /dev/usb/lp[0-15]
鼠标 | /dev/mouse

## 分区设备文件名 ##

### 设备文件名 ###

- /dev/hda1（IDE硬盘接口）  
- /dev/sda1（SCSI硬盘接口,SATA硬盘接口）  

hd代表IDE硬盘接口，sd代表SCSI硬盘接口和SATA硬盘接口  
a代表第一块硬盘  
1代表第一个分区  

## 挂载 ##

### 必须分区 ###

- / （根分区）
- swap 分区（交换分区）

### 推荐分区 ###

- /boot （启动分区）